(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{347:function(t,s,a){"use strict";a.r(s);var e=a(0),p=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"http适配器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http适配器"}},[t._v("#")]),t._v(" HTTP适配器")]),t._v(" "),a("p",[t._v("有时，您可能想在Nest应用程序上下文中或从外部访问基础HTTP服务器。")]),t._v(" "),a("p",[t._v("每个本机（特定于平台的）HTTP服务器/库（例如Express和Fastify）实例都包装在adapter中。适配器被注册为可从应用程序上下文中检索到的全局可用提供程序，也可以注入其他提供程序中。")]),t._v(" "),a("h2",{attrs:{id:"外应用程序上下文战略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外应用程序上下文战略"}},[t._v("#")]),t._v(" 外应用程序上下文战略")]),t._v(" "),a("p",[t._v("要从HttpAdapter应用程序上下文外部获取对的引用，请调用getHttpAdapter()方法。")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" NestFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ApplicationModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" httpAdapter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHttpAdapter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"在上下文战略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在上下文战略"}},[t._v("#")]),t._v(" 在上下文战略")]),t._v(" "),a("p",[t._v("要从HttpAdapterHost应用程序上下文中获取对的引用，请使用与任何其他现有提供程序相同的技术来注入它（例如，使用构造函数注入）。")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CatsService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" adapterHost"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" HttpAdapterHost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("提示\nHttpAdapterHost从进口@nestjs/core包。")])]),t._v(" "),a("p",[t._v("这HttpAdapterHost是不实际的HttpAdapter。要获取实际HttpAdapter实例，只需访问该httpAdapter属性。")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" adapterHost "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("HttpAdapterHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" httpAdapter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" adapterHost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("httpAdapter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("该httpAdapter是由底层框架使用的HTTP适配器的实际情况。它是ExpressAdapter或的一个实例FastifyAdapter（这两个类都是extend AbstractHttpAdapter）。")]),t._v(" "),a("p",[t._v("适配器对象公开了几种与HTTP服务器交互的有用方法。但是，如果要直接访问库实例（例如Express实例），请调用该getInstance()方法")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" httpAdapter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=p.exports}}]);