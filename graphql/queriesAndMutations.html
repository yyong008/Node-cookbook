<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>查询和突变 | NodeJS</title>
    <meta name="description" content="Learn Cookbook">
    
    
    <link rel="preload" href="/assets/css/0.styles.34788bb2.css" as="style"><link rel="preload" href="/assets/js/app.12ca0aa8.js" as="script"><link rel="preload" href="/assets/js/2.74bffc86.js" as="script"><link rel="preload" href="/assets/js/184.a8587cd6.js" as="script"><link rel="prefetch" href="/assets/js/10.b17cd786.js"><link rel="prefetch" href="/assets/js/100.49143f76.js"><link rel="prefetch" href="/assets/js/101.58f5e966.js"><link rel="prefetch" href="/assets/js/102.0d1b5f3c.js"><link rel="prefetch" href="/assets/js/103.d2dfeb4d.js"><link rel="prefetch" href="/assets/js/104.221dfde0.js"><link rel="prefetch" href="/assets/js/105.89693a0d.js"><link rel="prefetch" href="/assets/js/106.dd9b2874.js"><link rel="prefetch" href="/assets/js/107.b128334b.js"><link rel="prefetch" href="/assets/js/108.d0fceeff.js"><link rel="prefetch" href="/assets/js/109.a36abbdb.js"><link rel="prefetch" href="/assets/js/11.3a5bf6a3.js"><link rel="prefetch" href="/assets/js/110.24de8f58.js"><link rel="prefetch" href="/assets/js/111.ad2322c5.js"><link rel="prefetch" href="/assets/js/112.ebf5a5e6.js"><link rel="prefetch" href="/assets/js/113.945153eb.js"><link rel="prefetch" href="/assets/js/114.89fb0b54.js"><link rel="prefetch" href="/assets/js/115.32747b75.js"><link rel="prefetch" href="/assets/js/116.2ac5709d.js"><link rel="prefetch" href="/assets/js/117.33f44883.js"><link rel="prefetch" href="/assets/js/118.080ca422.js"><link rel="prefetch" href="/assets/js/119.3696781e.js"><link rel="prefetch" href="/assets/js/12.49c205ea.js"><link rel="prefetch" href="/assets/js/120.8629050e.js"><link rel="prefetch" href="/assets/js/121.c541c819.js"><link rel="prefetch" href="/assets/js/122.0beeab62.js"><link rel="prefetch" href="/assets/js/123.f4aacc83.js"><link rel="prefetch" href="/assets/js/124.7b0ddfcc.js"><link rel="prefetch" href="/assets/js/125.b8173440.js"><link rel="prefetch" href="/assets/js/126.9ee9486f.js"><link rel="prefetch" href="/assets/js/127.6c6aee84.js"><link rel="prefetch" href="/assets/js/128.8100734d.js"><link rel="prefetch" href="/assets/js/129.adb74c9f.js"><link rel="prefetch" href="/assets/js/13.b12048d4.js"><link rel="prefetch" href="/assets/js/130.7dbfe596.js"><link rel="prefetch" href="/assets/js/131.a32c075c.js"><link rel="prefetch" href="/assets/js/132.6a0aa273.js"><link rel="prefetch" href="/assets/js/133.52f806e2.js"><link rel="prefetch" href="/assets/js/134.a196478b.js"><link rel="prefetch" href="/assets/js/135.83dc683e.js"><link rel="prefetch" href="/assets/js/136.e31ffd18.js"><link rel="prefetch" href="/assets/js/137.c9dbde0b.js"><link rel="prefetch" href="/assets/js/138.4d1cd5eb.js"><link rel="prefetch" href="/assets/js/139.432cf5af.js"><link rel="prefetch" href="/assets/js/14.daaf0416.js"><link rel="prefetch" href="/assets/js/140.f86409f6.js"><link rel="prefetch" href="/assets/js/141.3abe86ad.js"><link rel="prefetch" href="/assets/js/142.4f6fc92f.js"><link rel="prefetch" href="/assets/js/143.1535cab9.js"><link rel="prefetch" href="/assets/js/144.eefe99f6.js"><link rel="prefetch" href="/assets/js/145.0a2bc4ed.js"><link rel="prefetch" href="/assets/js/146.0e7b17e8.js"><link rel="prefetch" href="/assets/js/147.aecc5e52.js"><link rel="prefetch" href="/assets/js/148.55697156.js"><link rel="prefetch" href="/assets/js/149.78d2096d.js"><link rel="prefetch" href="/assets/js/15.45e9a802.js"><link rel="prefetch" href="/assets/js/150.e6c87191.js"><link rel="prefetch" href="/assets/js/151.a8009d6e.js"><link rel="prefetch" href="/assets/js/152.63d8fdec.js"><link rel="prefetch" href="/assets/js/153.3bfc0798.js"><link rel="prefetch" href="/assets/js/154.65d2ca87.js"><link rel="prefetch" href="/assets/js/155.6eeb8114.js"><link rel="prefetch" href="/assets/js/156.651636fd.js"><link rel="prefetch" href="/assets/js/157.91eccdc2.js"><link rel="prefetch" href="/assets/js/158.dbf5b9d8.js"><link rel="prefetch" href="/assets/js/159.823f0880.js"><link rel="prefetch" href="/assets/js/16.e71df8d4.js"><link rel="prefetch" href="/assets/js/160.cfed749a.js"><link rel="prefetch" href="/assets/js/161.84daf4cb.js"><link rel="prefetch" href="/assets/js/162.ceb37edb.js"><link rel="prefetch" href="/assets/js/163.d225972f.js"><link rel="prefetch" href="/assets/js/164.74f77e4a.js"><link rel="prefetch" href="/assets/js/165.e158fe5d.js"><link rel="prefetch" href="/assets/js/166.c41de610.js"><link rel="prefetch" href="/assets/js/167.7df65d3f.js"><link rel="prefetch" href="/assets/js/168.919437c8.js"><link rel="prefetch" href="/assets/js/169.9bcafe9d.js"><link rel="prefetch" href="/assets/js/17.7dc7c03f.js"><link rel="prefetch" href="/assets/js/170.f33f16fb.js"><link rel="prefetch" href="/assets/js/171.59cd7a83.js"><link rel="prefetch" href="/assets/js/172.e059a6f4.js"><link rel="prefetch" href="/assets/js/173.811a1b3e.js"><link rel="prefetch" href="/assets/js/174.e8d72986.js"><link rel="prefetch" href="/assets/js/175.3ee31f58.js"><link rel="prefetch" href="/assets/js/176.437ff1a6.js"><link rel="prefetch" href="/assets/js/177.0d04f570.js"><link rel="prefetch" href="/assets/js/178.45296cb6.js"><link rel="prefetch" href="/assets/js/179.4176b858.js"><link rel="prefetch" href="/assets/js/18.7d64b721.js"><link rel="prefetch" href="/assets/js/180.a2c20ea9.js"><link rel="prefetch" href="/assets/js/181.77390ab1.js"><link rel="prefetch" href="/assets/js/182.8ebcfdac.js"><link rel="prefetch" href="/assets/js/183.8a6b9bc8.js"><link rel="prefetch" href="/assets/js/185.763d219b.js"><link rel="prefetch" href="/assets/js/186.d1c67c82.js"><link rel="prefetch" href="/assets/js/187.d0379152.js"><link rel="prefetch" href="/assets/js/188.3935a5a7.js"><link rel="prefetch" href="/assets/js/189.d40e35ad.js"><link rel="prefetch" href="/assets/js/19.1f322990.js"><link rel="prefetch" href="/assets/js/190.f5168c2b.js"><link rel="prefetch" href="/assets/js/191.00fd22a9.js"><link rel="prefetch" href="/assets/js/192.bb76bc33.js"><link rel="prefetch" href="/assets/js/193.0028d6ac.js"><link rel="prefetch" href="/assets/js/194.504c913a.js"><link rel="prefetch" href="/assets/js/195.6d91833a.js"><link rel="prefetch" href="/assets/js/20.520e4112.js"><link rel="prefetch" href="/assets/js/21.1da5f168.js"><link rel="prefetch" href="/assets/js/22.d42c6e1f.js"><link rel="prefetch" href="/assets/js/23.158333f0.js"><link rel="prefetch" href="/assets/js/24.4933f40a.js"><link rel="prefetch" href="/assets/js/25.057c428c.js"><link rel="prefetch" href="/assets/js/26.de289859.js"><link rel="prefetch" href="/assets/js/27.b14ef5da.js"><link rel="prefetch" href="/assets/js/28.b1329e69.js"><link rel="prefetch" href="/assets/js/29.49d46c7a.js"><link rel="prefetch" href="/assets/js/3.9fae61cb.js"><link rel="prefetch" href="/assets/js/30.83d321ec.js"><link rel="prefetch" href="/assets/js/31.65f56091.js"><link rel="prefetch" href="/assets/js/32.78fcc539.js"><link rel="prefetch" href="/assets/js/33.87e5077b.js"><link rel="prefetch" href="/assets/js/34.a4bf065f.js"><link rel="prefetch" href="/assets/js/35.b81d32e6.js"><link rel="prefetch" href="/assets/js/36.9ef245a6.js"><link rel="prefetch" href="/assets/js/37.4e2664a6.js"><link rel="prefetch" href="/assets/js/38.f8b21767.js"><link rel="prefetch" href="/assets/js/39.294b2e23.js"><link rel="prefetch" href="/assets/js/4.554dccb8.js"><link rel="prefetch" href="/assets/js/40.a35c8bd3.js"><link rel="prefetch" href="/assets/js/41.d60f7eb3.js"><link rel="prefetch" href="/assets/js/42.30f5ce46.js"><link rel="prefetch" href="/assets/js/43.101904fa.js"><link rel="prefetch" href="/assets/js/44.475772ec.js"><link rel="prefetch" href="/assets/js/45.58a6227c.js"><link rel="prefetch" href="/assets/js/46.045cad94.js"><link rel="prefetch" href="/assets/js/47.63628bb5.js"><link rel="prefetch" href="/assets/js/48.4f86f4a6.js"><link rel="prefetch" href="/assets/js/49.92a2af24.js"><link rel="prefetch" href="/assets/js/5.bfcb02d1.js"><link rel="prefetch" href="/assets/js/50.b7fd8454.js"><link rel="prefetch" href="/assets/js/51.9bbf3588.js"><link rel="prefetch" href="/assets/js/52.53f6da60.js"><link rel="prefetch" href="/assets/js/53.b415231c.js"><link rel="prefetch" href="/assets/js/54.53388fc4.js"><link rel="prefetch" href="/assets/js/55.fc24bc21.js"><link rel="prefetch" href="/assets/js/56.9b3c2535.js"><link rel="prefetch" href="/assets/js/57.ba13dd55.js"><link rel="prefetch" href="/assets/js/58.9a4c6a43.js"><link rel="prefetch" href="/assets/js/59.96e435e7.js"><link rel="prefetch" href="/assets/js/6.95fccca8.js"><link rel="prefetch" href="/assets/js/60.d17a46b6.js"><link rel="prefetch" href="/assets/js/61.0860ef3f.js"><link rel="prefetch" href="/assets/js/62.713860bc.js"><link rel="prefetch" href="/assets/js/63.38e7edcf.js"><link rel="prefetch" href="/assets/js/64.176f8bbb.js"><link rel="prefetch" href="/assets/js/65.903f4b50.js"><link rel="prefetch" href="/assets/js/66.1c5277a5.js"><link rel="prefetch" href="/assets/js/67.abfce232.js"><link rel="prefetch" href="/assets/js/68.37814697.js"><link rel="prefetch" href="/assets/js/69.c77c3c67.js"><link rel="prefetch" href="/assets/js/7.d035404c.js"><link rel="prefetch" href="/assets/js/70.742159c8.js"><link rel="prefetch" href="/assets/js/71.00f8f464.js"><link rel="prefetch" href="/assets/js/72.c8145491.js"><link rel="prefetch" href="/assets/js/73.edd94acd.js"><link rel="prefetch" href="/assets/js/74.deb52f36.js"><link rel="prefetch" href="/assets/js/75.5969aaa2.js"><link rel="prefetch" href="/assets/js/76.24433b28.js"><link rel="prefetch" href="/assets/js/77.e1a029bc.js"><link rel="prefetch" href="/assets/js/78.ec41973a.js"><link rel="prefetch" href="/assets/js/79.a8436b64.js"><link rel="prefetch" href="/assets/js/8.d1c35f37.js"><link rel="prefetch" href="/assets/js/80.70d752cd.js"><link rel="prefetch" href="/assets/js/81.5392aaa4.js"><link rel="prefetch" href="/assets/js/82.87f6938e.js"><link rel="prefetch" href="/assets/js/83.9efaf755.js"><link rel="prefetch" href="/assets/js/84.d0bba92a.js"><link rel="prefetch" href="/assets/js/85.f8f968c5.js"><link rel="prefetch" href="/assets/js/86.9e5296f6.js"><link rel="prefetch" href="/assets/js/87.8774d4bd.js"><link rel="prefetch" href="/assets/js/88.7513e6b5.js"><link rel="prefetch" href="/assets/js/89.421b5237.js"><link rel="prefetch" href="/assets/js/9.220b3eb6.js"><link rel="prefetch" href="/assets/js/90.47497ac9.js"><link rel="prefetch" href="/assets/js/91.20e7b656.js"><link rel="prefetch" href="/assets/js/92.ab742aa0.js"><link rel="prefetch" href="/assets/js/93.6f6eef2e.js"><link rel="prefetch" href="/assets/js/94.b8ff20d8.js"><link rel="prefetch" href="/assets/js/95.e97d80de.js"><link rel="prefetch" href="/assets/js/96.7f9bfe96.js"><link rel="prefetch" href="/assets/js/97.5bc5b95e.js"><link rel="prefetch" href="/assets/js/98.07280354.js"><link rel="prefetch" href="/assets/js/99.be9ded95.js">
    <link rel="stylesheet" href="/assets/css/0.styles.34788bb2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NodeJS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/core/" class="nav-link">Node</a></div><div class="nav-item"><a href="/packageManager/" class="nav-link">Manager</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Nestjs" class="dropdown-title"><span class="title">Nestjs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/nestjs/office-docs/" class="nav-link">NestJS 官方文档</a></li><li class="dropdown-item"><!----> <a href="/nestjs/source-codes/" class="nav-link">NestJS 源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="framework" class="dropdown-title"><span class="title">framework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/egg/" class="nav-link">egg</a></li><li class="dropdown-item"><!----> <a href="/framework/express/" class="nav-link">express</a></li><li class="dropdown-item"><!----> <a href="/framework/fasitify/" class="nav-link">fasitify</a></li><li class="dropdown-item"><!----> <a href="/framework/hapi/" class="nav-link">hapi</a></li><li class="dropdown-item"><!----> <a href="/framework/koa/" class="nav-link">koa</a></li><li class="dropdown-item"><!----> <a href="/framework/midway/" class="nav-link">midway</a></li></ul></div></div><div class="nav-item"><a href="/graphql/" class="nav-link router-link-active">graphql</a></div><div class="nav-item"><a href="/TypeORM/" class="nav-link">TypeORM</a></div><div class="nav-item"><a href="/branchmark/" class="nav-link">性能</a></div><div class="nav-item"><a href="/vendor/" class="nav-link">第三方包</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/core/" class="nav-link">Node</a></div><div class="nav-item"><a href="/packageManager/" class="nav-link">Manager</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Nestjs" class="dropdown-title"><span class="title">Nestjs</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/nestjs/office-docs/" class="nav-link">NestJS 官方文档</a></li><li class="dropdown-item"><!----> <a href="/nestjs/source-codes/" class="nav-link">NestJS 源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="framework" class="dropdown-title"><span class="title">framework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/framework/egg/" class="nav-link">egg</a></li><li class="dropdown-item"><!----> <a href="/framework/express/" class="nav-link">express</a></li><li class="dropdown-item"><!----> <a href="/framework/fasitify/" class="nav-link">fasitify</a></li><li class="dropdown-item"><!----> <a href="/framework/hapi/" class="nav-link">hapi</a></li><li class="dropdown-item"><!----> <a href="/framework/koa/" class="nav-link">koa</a></li><li class="dropdown-item"><!----> <a href="/framework/midway/" class="nav-link">midway</a></li></ul></div></div><div class="nav-item"><a href="/graphql/" class="nav-link router-link-active">graphql</a></div><div class="nav-item"><a href="/TypeORM/" class="nav-link">TypeORM</a></div><div class="nav-item"><a href="/branchmark/" class="nav-link">性能</a></div><div class="nav-item"><a href="/vendor/" class="nav-link">第三方包</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>查询和突变</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/graphql/queriesAndMutations.html#领域-filed" class="sidebar-link">领域 Filed</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/graphql/queriesAndMutations.html#参数-arguments" class="sidebar-link">参数 Arguments</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/graphql/queriesAndMutations.html#别名-alises" class="sidebar-link">别名 Alises</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/graphql/queriesAndMutations.html#fragments-分段" class="sidebar-link">Fragments 分段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/graphql/queriesAndMutations.html#在片段中使用变量" class="sidebar-link">在片段中使用变量</a></li></ul></li><li><a href="/graphql/queriesAndMutations.html#operation-name-操作名" class="sidebar-link">Operation Name 操作名</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/graphql/queriesAndMutations.html#variables-变量" class="sidebar-link">Variables 变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/graphql/queriesAndMutations.html#变量定义" class="sidebar-link">变量定义</a></li></ul></li><li><a href="/graphql/queriesAndMutations.html#变量默认值" class="sidebar-link">变量默认值</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/graphql/queriesAndMutations.html#directives-指令" class="sidebar-link">Directives 指令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/graphql/queriesAndMutations.html#mutations-突变" class="sidebar-link">Mutations 突变</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/graphql/queriesAndMutations.html#突变中的多个领域" class="sidebar-link">突变中的多个领域</a></li></ul></li><li><a href="/graphql/queriesAndMutations.html#inline-fragments-行内分段" class="sidebar-link">Inline Fragments 行内分段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/graphql/queriesAndMutations.html#源字段" class="sidebar-link">源字段</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>在这个页面上，您将详细了解如何查询 GraphQL 服务器</p> <h2 id="领域-filed"><a href="#领域-filed" class="header-anchor">#</a> 领域 Filed</h2> <p>简单地说，GraphQL是关于在对象上请求特定字段的。让我们先来看一个非常简单的查询，以及运行它时得到的结果：</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  hero <span class="token punctuation">{</span>
    name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hero&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>您可以立即看到查询具有与结果完全相同的形状。这对于 GraphQL 至关重要，因为您总是返回您期望的内容，并且服务器会确切知道客户端需要哪些字段。
·000年
字段名称返回字符串类型，在本例中为《星球大战》主要英雄&quot;R2-D2&quot;的名称。</p> <p>:::warn
哦，还有一件事 - 上面的查询是交互式的。这意味着您可以根据需要更改它并查看新结果。尝试在查询中向英雄对象添加&quot;显示&quot;字段，然后查看新结果。
:::</p> <p>简单地说，GraphQL是关于在对象上请求特定字段的。让我们先来看一个非常简单的查询，以及运行它时得到的结果：
在前面的示例中，我们只是询问了返回字符串的英雄名称，但是字段也可以引用对象。在这种情况下，您可以对该对象的字段进行子选择。 GraphQL查询可以遍历相关对象及其字段，使客户端可以在一个请求中获取大量相关数据，而不必像传统REST体系结构中那样进行多次往返。</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  hero <span class="token punctuation">{</span>
    name
    <span class="token comment"># Queries can have comments!</span>
    friends <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hero&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;friends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Han Solo&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Leia Organa&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>请注意，在此实例中， friends 字段返回项数组。 GraphQL 查询对于单个项目或项目列表看起来都是相同的，但是根据架构中指示的内容，我们知道期望哪个</p> <h2 id="参数-arguments"><a href="#参数-arguments" class="header-anchor">#</a> 参数 Arguments</h2> <p>如果我们唯一能做的就是遍历对象及其字段，那么GraphQL已经是一种非常有用的数据获取语言。但是，当您添加了将参数传递给字段的功能时，事情就会变得更加有趣。</p> <div class="language-GRAPHQL extra-class"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  human<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">&quot;1000&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    height
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;human&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">1.72</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-GRAPHQL extra-class"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  human<span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token string">&quot;1000&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    height<span class="token punctuation">(</span><span class="token attr-name">unit</span><span class="token punctuation">:</span> <span class="token constant">FOOT</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;human&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;height&quot;</span><span class="token operator">:</span> <span class="token number">1.72</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在像 REST这样的系统中，您只能传递一组参数-请求中的查询参数和URL段。但是在GraphQL中，每一个字段和嵌套对象都可以获取自己的参数集，从而使 GraphQL 可以完全替代进行多个 API 提取。 你甚至可以将参数传递到标量字段， 以在服务器上实现一次实现数据转换，而不是分别在每一客户端上实现数据转换。</p> <p>参数可以有许多不同的类型。在上面的示例中，我们使用了 Enumeration 类型，该类型表示一组有限的选项（在这种情况下，长度单位为 METER或FOOT）。GraphQL 带有一组默认的类型，但是 GraphQL 服务器也可以声明自己的自定义类型，只要他们可以序列化您的传输格式即可。</p> <p>阅读更多的有关 GraphQL 类型系统</p> <h2 id="别名-alises"><a href="#别名-alises" class="header-anchor">#</a> 别名 Alises</h2> <p>如果您眼神敏锐，您可能已经注意到，由于结果对象字段与查询中字段的名称匹配，但不包含参数，因此您无法直接查询具有不同参数的同一字段。这就是为什么您需要别名-它们使您可以将字段的结果重命名为所需的任何名称。</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  <span class="token attr-name">empireHero</span><span class="token punctuation">:</span> hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">EMPIRE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
  <span class="token punctuation">}</span>
  <span class="token attr-name">jediHero</span><span class="token punctuation">:</span> hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">JEDI</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;empireHero&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;jediHero&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面的示例中，两个 hero 字段会发生冲突，但是由于我们可以将它们别名为不同的名称，因此我们可以在一个请求中获得两个结果。</p> <h2 id="fragments-分段"><a href="#fragments-分段" class="header-anchor">#</a> Fragments 分段</h2> <p>假设我们的应用程序中有一个相对复杂的页面，可让我们与他们的朋友并排查看两个 hero。您可以想象这样的查询很快就会变得复杂，因此我们需要至少重复一次字段-比较的每一侧都要重复一次</p> <p>这就是 GraphQL 包含称为片段的可重用单元的原因。片段使您可以构造字段集，然后将它们包含在需要的查询中。这是一个如何查询的实例：</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  <span class="token attr-name">leftComparison</span><span class="token punctuation">:</span> hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">EMPIRE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">comparisonFields</span>
  <span class="token punctuation">}</span>
  <span class="token attr-name">rightComparison</span><span class="token punctuation">:</span> hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">JEDI</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">comparisonFields</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">comparisonFields</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span>
  name
  appearsIn
  friends <span class="token punctuation">{</span>
    name
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;leftComparison&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;appearsIn&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;NEWHOPE&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;EMPIRE&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;JEDI&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;friends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Han Solo&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Leia Organa&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C-3PO&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rightComparison&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;appearsIn&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;NEWHOPE&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;EMPIRE&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;JEDI&quot;</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;friends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Han Solo&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Leia Organa&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>您可以看到如果重复这些字段，上面的查询将如何重复。片段的概念经常用于将复杂的应用程序数据需求分成较小的块，尤其是当您需要将具有不同片段的大量UI组件组合到一个初始数据提取中时。</p> <h3 id="在片段中使用变量"><a href="#在片段中使用变量" class="header-anchor">#</a> 在片段中使用变量</h3> <p>片段可以访问查询或变异中声明的变量。查看变量。</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">query</span> HeroComparison<span class="token punctuation">(</span><span class="token variable">$first</span><span class="token punctuation">:</span> Int <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">leftComparison</span><span class="token punctuation">:</span> hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">EMPIRE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">comparisonFields</span>
  <span class="token punctuation">}</span>
  <span class="token attr-name">rightComparison</span><span class="token punctuation">:</span> hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">JEDI</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ..comparisonFields
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">comparisonFields</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span>
  name
  friendsConnect<span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> <span class="token variable">$first</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    totalCount
    <span class="token attr-name">edges</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      node <span class="token punctuation">{</span>
        name
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;leftComparison&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;friendsConnection&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;totalCount&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">&quot;edges&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Han Solo&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Leia Organa&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;C-3PO&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rightComparison&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;friendsConnection&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;totalCount&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">&quot;edges&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Han Solo&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;node&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Leia Organa&quot;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="operation-name-操作名"><a href="#operation-name-操作名" class="header-anchor">#</a> Operation Name 操作名</h2> <p>到目前为止，我们一直在使用速记语法，其中省略了查询关键字和查询名称，但是在生产应用程序中，使用它们来减少代码的歧义很有用。</p> <p>这是一个示例，其中将关键字查询作为操作类型，将HeroNameAndFriends作为操作名称:</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">query</span> 将HeroNameAndFriends <span class="token punctuation">{</span>
  hero <span class="token punctuation">{</span>
    name
    friends <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hero&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;friends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Han Solo&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Leia Organa&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>操作类型可以是查询，变异或预订，并描述您打算执行的操作类型。除非您使用查询速记语法，否则操作类型是必需的，在这种情况下，您将无法为操作提供名称或变量定义。</p> <p>操作名称是您的操作的有意义且明确的名称。仅在多操作文档中需要它，但鼓励使用它，因为它对于调试和服务器端日志记录非常有帮助。当网络日志或GraphQL服务器出现问题时，通过名称标识代码库中的查询比尝试解密内容更容易。可以将其视为您喜欢的编程语言中的函数名称。例如，在JavaScript中，我们只能轻松地使用匿名函数，但是当给函数命名时，更容易跟踪，调试代码以及​​在调用时记录日志。以同样的方式，GraphQL查询和变异名称以及片段名称可以在服务器端成为有用的调试工具，以识别不同的GraphQL请求。</p> <h2 id="variables-变量"><a href="#variables-变量" class="header-anchor">#</a> Variables 变量</h2> <p>到目前为止，我们已经在查询字符串中编写了所有参数。但是在大多数应用程序中，字段的参数是动态的：例如，可能存在一个下拉列表，可让您选择您感兴趣的《星球大战》剧集，搜索字段或一组过滤器。</p> <p>直接在查询字符串中传递这些动态参数不是一个好主意，因为这样，我们的客户端代码将需要在运行时动态处理查询字符串，并将其序列化为GraphQL特定的格式。取而代之的是，GraphQL具有一流的方法可将动态值从查询中分解出来，并将它们作为单独的字典传递。这些值称为变量。</p> <p>当我们开始使用变量时，我们需要做三件事：</p> <ul><li>用<code>$variableName</code>在查询中放置静态值</li> <li>将<code>$variableName</code>声明为查询接受的变量之一</li> <li>在单独的，特定于传输的（通常为JSON）变量字典中传递variableName：值</li></ul> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">query</span> HeroNameAndFriends<span class="token punctuation">(</span><span class="token variable">$episode</span><span class="token punctuation">:</span> Episode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    friends <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
// Variables
<span class="token punctuation">{</span>
  <span class="token string">&quot;episode&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;JEDI&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-JSON extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hero&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;friends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Luke Skywalker&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Han Solo&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Leia Organa&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，在我们的客户代码中，我们可以简单地传递一个不同的变量，而不需要构造一个全新的查询。通常，这也是表示查询中的哪些参数应该是动态的一个好习惯-我们绝不应该进行字符串插值来从用户提供的值构造查询。</p> <h3 id="变量定义"><a href="#变量定义" class="header-anchor">#</a> 变量定义</h3> <p>变量定义就是上面查询中的（$ episode：Episode）部分。它的工作方式就像类型语言中函数的参数定义一样。它列出了所有变量，以$为前缀，然后是变量的类型（在本例中为Episode）。</p> <p>所有声明的变量必须是标量，枚举或输入对象类型。因此，如果要将复杂的对象传递到字段中，则需要知道服务器上匹配的输入类型。在“架构”页面上了解有关输入对象类型的更多信息。</p> <p>变量定义可以是可选的，也可以是必需的。在上述情况下，由于没有！在剧集类型旁边，它是可选的。但是，如果要将变量传递到的字段要求使用非null参数，则也必须要使用变量。</p> <p>要了解有关这些变量定义的语法的更多信息，学习GraphQL模式语言很有用。在“模式”页面上详细说明了模式语言。</p> <h2 id="变量默认值"><a href="#变量默认值" class="header-anchor">#</a> 变量默认值</h2> <p>通过在类型声明之后添加默认值，还可以将默认值分配给查询中的变量。</p> <div class="language-GRAPHQL extra-class"><pre class="language-graphql"><code><span class="token keyword">query</span> HeroNameAndFriends<span class="token punctuation">(</span><span class="token variable">$episode</span><span class="token punctuation">:</span> Episode <span class="token operator">=</span> <span class="token constant">JEDI</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    friends <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>为所有变量提供默认值后，您可以在不传递任何变量的情况下调用查询。如果将任何变量作为变量字典的一部分传递，则它们将覆盖默认值。</p> <h2 id="directives-指令"><a href="#directives-指令" class="header-anchor">#</a> Directives 指令</h2> <p>面我们讨论了变量如何使我们避免进行手工字符串内插来构造动态查询。在参数中传递变量解决了这些问题中的一大类，但我们可能还需要一种使用变量动态更改查询结构和形状的方法。例如，我们可以想象一个UI组件具有一个摘要视图和详细视图，其中一个包含比另一个更多的字段。</p> <p>让我们为这样的组件构造一个查询：</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">query</span> Hero<span class="token punctuation">(</span><span class="token variable">$episode</span><span class="token punctuation">:</span> Episode<span class="token punctuation">,</span> <span class="token variable">$withFriend</span><span class="token punctuation">:</span> Boolean<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hero <span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    friends <span class="token directive function">@include</span><span class="token punctuation">(</span><span class="token attr-name">if</span><span class="token punctuation">:</span> <span class="token variable">$withFriends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

// Variables
<span class="token punctuation">{</span>
  <span class="token string">&quot;episode&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;JEDI&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;withFriends&quot;</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;hero&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>尝试编辑上面的变量以改为为withFriends传递true，并查看结果如何变化。</p> <p>我们需要在GraphQL中使用一个称为指令的新功能。指令可以附加到字段或片段包含中，并且可以以服务器希望的任何方式影响查询的执行。核心GraphQL规范恰好包括两个指令，任何符合规范的GraphQL服务器实现都必须支持这些指令：</p> <ul><li><code>@include(if: Boolean)</code>如果参数为true，则仅在结果中包括此字段。</li> <li><code>@skip(if: Boolean)</code>如果参数为true，则跳过此字段。</li></ul> <p>伪指令可以帮助您避免需要进行字符串操作以添加和删除查询中的字段的情况。服务器实现还可以通过定义全新的指令来添加实验性功能。</p> <h2 id="mutations-突变"><a href="#mutations-突变" class="header-anchor">#</a> Mutations 突变</h2> <p>GraphQL的大多数讨论都集中在数据获取上，但是任何完整的数据平台都需要一种修改服务器端数据的方法。</p> <p>在REST中，任何请求都可能最终导致服务器上出现一些副作用，但按照惯例，建议不要使用GET请求来修改数据。 GraphQL是类似的-从技术上讲，任何查询都可以实现以引起数据写入。但是，建立一个约定是有用的，该约定应使引起写操作的任何操作都应通过突变显式发送。</p> <p>就像查询中一样，如果突变字段返回对象类型，则可以请求嵌套字段。这对于在更新后获取对象的新状态很有用。让我们看一个简单的示例变异：</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">mutation</span> CreateReviewForEpisode<span class="token punctuation">(</span><span class="token variable">$ep</span><span class="token punctuation">:</span> Epis<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token variable">$review</span><span class="token punctuation">:</span> ReviewInput<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  createReview<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$ep</span><span class="token punctuation">,</span> <span class="token attr-name">review</span><span class="token punctuation">:</span> <span class="token variable">$review</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stars
    commentary
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
// variable
<span class="token punctuation">{</span>
  <span class="token string">&quot;ep&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;JEDI&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;review&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;stars&quot;</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token string">&quot;commentary&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;This is a great movie!&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;createReview&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;stars&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token property">&quot;commentary&quot;</span><span class="token operator">:</span> <span class="token string">&quot;This is a greate movie!&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意createReview字段如何返回新创建的评论的星号和评论字段。这在更改现有数据时（例如在增加字段时）特别有用，因为我们可以使用一个请求来更改和查询字段的新值。</p> <p>您可能还会注意到，在此示例中，我们传入的审阅变量不是标量。它是一种输入对象类型，一种特殊的对象类型，可以作为参数传递。在“架构”页面上了解有关输入类型的更多信息。</p> <h3 id="突变中的多个领域"><a href="#突变中的多个领域" class="header-anchor">#</a> 突变中的多个领域</h3> <p>突变可以包含多个字段，就像查询一样。除了名称之外，查询和变异之间还有一个重要的区别：</p> <p>当查询字段并行执行时，变异字段依次运行，一个接一个。</p> <p>这意味着，如果我们在一个请求中发送了两个crementCredits变异，则保证第一个会在第二个请求开始之前完成，从而确保我们不会以自己的竞争状况而告终。</p> <h2 id="inline-fragments-行内分段"><a href="#inline-fragments-行内分段" class="header-anchor">#</a> Inline Fragments 行内分段</h2> <p>像许多其他类型的系统一样，GraphQL模式包括定义接口和联合类型的能力。在架构指南中了解它们。</p> <p>如果要查询返回接口或联合类型的字段，则需要使用内联片段来访问基础具体类型上的数据。用一个例子最容易看到：</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token keyword">query</span> HeroForEpisode<span class="token punctuation">(</span><span class="token variable">$ep</span><span class="token punctuation">:</span> Episode<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  hero<span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$ep</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name
    <span class="token operator">...</span><span class="token keyword">on</span> <span class="token class-name">Droid</span> <span class="token punctuation">{</span>
      primaryFunction
    <span class="token punctuation">}</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
      height
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

// variable
<span class="token punctuation">{</span>
  <span class="token string">&quot;ep&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;JEDI&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hero&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;R2-D2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;primaryFunction&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Astromech&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在此查询中，英雄字段返回字符类型，根据情节参数，该类型可以是人类或机器人。在直接选择中，您只能询问字符界面上存在的字段，例如名称。</p> <p>要询问具体类型的字段，您需要使用带有类型条件的内联片段。因为第一个片段在Droid上被标记为...，所以仅当hero返回的Character是Droid类型时，才会执行primaryFunction字段。对于“人类”类型的高度字段也是如此。</p> <p>命名片段也可以以相同的方式使用，因为命名片段始终具有附加的类型。</p> <h3 id="源字段"><a href="#源字段" class="header-anchor">#</a> 源字段</h3> <p>鉴于在某些情况下您不知道将从GraphQL服务获得的类型，因此需要某种方法来确定如何在客户端上处理该数据。 GraphQL允许您在查询的任何时候请求__typename（一个元字段），以获取该时刻对象类型的名称。</p> <div class="language-graphql extra-class"><pre class="language-graphql"><code><span class="token punctuation">{</span>
  search<span class="token punctuation">(</span><span class="token attr-name">text</span><span class="token punctuation">:</span> <span class="token string">&quot;an&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    __typename
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Human</span> <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Droid</span> <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
    <span class="token operator">...</span> <span class="token keyword">on</span> <span class="token class-name">Starship</span> <span class="token punctuation">{</span>
      name
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;search&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;__typename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Human&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Han Solo&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;__typename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Human&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Leia Organa&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;__typename&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Starship&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TIE advanced x1&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面的查询中，搜索返回的联合类型可以是三个选项之一。如果没有__typename字段，将无法从客户端分辨出不同的类型。</p> <p>GraphQL服务提供了一些元字段，其余的元字段用于公开自省系统。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.12ca0aa8.js" defer></script><script src="/assets/js/2.74bffc86.js" defer></script><script src="/assets/js/184.a8587cd6.js" defer></script>
  </body>
</html>
